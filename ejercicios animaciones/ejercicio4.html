<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ejercicio4</title>
    <style>
        .caja{
            width: 300px;
            height: 300px;
            margin: 1em;
        }

        .cajaSlideUp{
            display: block;
            visibility: visible;
            background-color:red;
        }

        .cajaSlideDown{
            display: none;
            visibility: hidden;
            background-color:green;
        }
    </style>

    <script>

        var intervalSlideUp;
        var intervalSlideDown;
        function iniciarSlideUp(){
            slideUp(document.getElementById('caja1'),1000);
        }

        function slideUp(element, duration){
            console.log(element.style);
            var step = element.clientHeight;
            intervalSlideUp = setInterval(lessHeight,duration/100,element.id, parseFloat(step)/100);
        }

        function lessHeight(id, step){
            var n = parseFloat(document.getElementById(id).clientHeight);
            n = n - step;
            document.getElementById(id).style.height = n.toString() + 'px';
            if(n <= 0){
                document.getElementById(id).style.height = '0px';
                clearInterval(intervalSlideUp);
            }      
        }

        function iniciarSlideDown(){
            slideDown(document.getElementById('caja2'),1000);
        }

        function slideDown(element, duration){
            var h = (window.getComputedStyle(element));
            h = h.height.slice(0,-2);
            element.style.display = 'block';
            element.style.visibility = 'visible';
            element.style.height = '0px';
            intervalSlideDown = setInterval(moreHeight,duration/100,element.id, parseFloat(h)/100, h);
        }

        function moreHeight(id, step, max){
            var n = parseFloat(document.getElementById(id).style.height.slice(0,-2));
            n = n + step;
            
            
            console.log(n);
            if(n >= max ){
                //document.getElementById(id).style.height = '0px';
                clearInterval(intervalSlideDown);
            }    
            document.getElementById(id).style.height = n.toString() + 'px';
        }

    </script>
</head>
<body>
    <div class="contenedor">
        <h1>slideDown() ''</h1>
        <div class='caja cajaSlideUp' id="caja1"></div>
        <button onclick="iniciarSlideUp()">iniciar</button>
    </div>

    <div class="contenedor">
        <h1>slideUp() ''</h1>
        <div class='caja cajaSlideDown' id="caja2"></div>
        <button onclick="iniciarSlideDown()">iniciar</button>
    </div>
</body>
</html>